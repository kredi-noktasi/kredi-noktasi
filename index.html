<!doctype html>
<html lang="tr">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>√áoklu Kredi Paneli</title>
<style>
  :root{
    --bg0:#050914; --bg1:#0e1a33;
    --text:#e6edf6; --muted:rgba(230,237,246,.72);
    --g1:#2ecc71; --g2:#3df58a;
    --y1:#f1c40f; --y2:#ffe066;
    --r1:#e74c3c; --r2:#ff6b6b;
  }
  *{box-sizing:border-box}
  body{
    margin:0; color:var(--text);
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
    background: radial-gradient(1200px 700px at 50% 110%, var(--bg1) 0%, var(--bg0) 62%);
  }
  .wrap{max-width:1280px;margin:auto;padding:22px}
  .card{
    background:linear-gradient(180deg,#0c1426,#070c1a);
    border:1px solid rgba(255,255,255,.06);
    border-radius:22px;
    padding:22px;
    box-shadow:0 25px 80px rgba(0,0,0,.55);
  }
  .topbar{display:flex;gap:14px;align-items:flex-start;justify-content:space-between;flex-wrap:wrap;margin-bottom:14px}
  h1{margin:0;font-size:20px;letter-spacing:.2px}
  .sub{margin-top:6px;font-size:13px;color:var(--muted);line-height:1.45}
  .actions{display:flex; gap:10px; flex-wrap:wrap; align-items:center}
  .btn{
    padding:12px 16px;border-radius:14px;border:1px solid rgba(255,255,255,.10);
    background:rgba(10,16,32,.55);
    color:var(--text);font-weight:900;cursor:pointer;
    backdrop-filter: blur(6px);
  }
  .btn.primary{
    border:0;
    background:linear-gradient(135deg,#3b6cff,#1f4bff);
    box-shadow:0 12px 34px rgba(59,108,255,.35);
  }

  .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:14px}
  .col-3{grid-column:span 3}
  .col-12{grid-column:span 12}
  label{display:block;font-size:12px;color:var(--muted);margin-bottom:6px}
  input,select{
    width:100%;padding:14px;border-radius:14px;
    background:#070c1a;color:var(--text);
    border:1px solid rgba(255,255,255,.10);
    outline:none;
  }
  input:focus,select:focus{ border-color:rgba(116,188,255,.9); box-shadow:0 0 0 3px rgba(116,188,255,.15); }

  .result-wrap{
    margin-top:22px;
    padding:26px;
    border-radius:26px;
    border:1px solid rgba(255,255,255,.08);
    background:linear-gradient(180deg,#0f1b35,#070c1a);
    box-shadow:0 28px 90px rgba(0,0,0,.62);
    position:relative;
    overflow:hidden;
  }
  .result-wrap::before{
    content:"";
    position:absolute; inset:-2px;
    background: radial-gradient(700px 300px at 20% 10%, rgba(255,255,255,.07), transparent 55%);
    pointer-events:none;
  }
  .result-head{display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap;align-items:center;margin-bottom:14px}
  .result-title{font-size:18px;font-weight:1000;letter-spacing:.35px}
  .best{
    font-size:13px;font-weight:900;
    padding:10px 14px;border-radius:999px;
    border:1px solid rgba(255,255,255,.12);
    background:rgba(7,12,26,.65);
  }

  .badges{display:flex;flex-wrap:wrap;gap:12px;margin:10px 0 16px}
  .badge{
    display:flex; align-items:center; gap:10px;
    padding:12px 16px;border-radius:999px;
    font-weight:1000;font-size:14px;
    background:rgba(7,12,26,.70);
    border:1px solid rgba(255,255,255,.12);
  }
  .badge .k{opacity:.75;font-size:12px;font-weight:900}
  .badge .v{font-size:14px;font-weight:1100}
  .badge .icon{font-size:16px;line-height:1}

  .bar{height:18px;border-radius:999px;background:#1a2238;overflow:hidden;box-shadow: inset 0 0 0 1px rgba(255,255,255,.06);}
  .bar span{display:block;height:100%;width:0%;transition:width .55s cubic-bezier(.2,.9,.2,1);}
  .green{background:linear-gradient(90deg,var(--g1),var(--g2))}
  .yellow{background:linear-gradient(90deg,var(--y1),var(--y2))}
  .red{background:linear-gradient(90deg,var(--r1),var(--r2))}

  .big{margin-top:18px;text-align:center;font-weight:1100;font-size:38px;letter-spacing:.2px}
  .big small{display:block;margin-bottom:4px;font-size:14px;font-weight:900;color:var(--muted);letter-spacing:.3px;text-transform:uppercase;}
  .explain{margin-top:14px;color:var(--muted);font-size:12px;line-height:1.55;text-align:center}

  .tone-green{ background:linear-gradient(180deg, rgba(46,204,113,.14), #070c1a 40%), linear-gradient(180deg,#0f1b35,#070c1a); }
  .tone-yellow{ background:linear-gradient(180deg, rgba(241,196,15,.14), #070c1a 40%), linear-gradient(180deg,#0f1b35,#070c1a); }
  .tone-red{ background:linear-gradient(180deg, rgba(231,76,60,.14), #070c1a 40%), linear-gradient(180deg,#0f1b35,#070c1a); }

  @keyframes pulseGlow {
    0%{ box-shadow:0 0 0 rgba(46,204,113,0), 0 28px 90px rgba(0,0,0,.62); transform:translateY(0);}
    50%{ box-shadow:0 0 40px rgba(46,204,113,.22), 0 30px 95px rgba(0,0,0,.66); transform:translateY(-1px);}
    100%{ box-shadow:0 0 0 rgba(46,204,113,0), 0 28px 90px rgba(0,0,0,.62); transform:translateY(0);}
  }
  @keyframes wobble {0%{transform:rotate(0)}25%{transform:rotate(-.5deg)}50%{transform:rotate(.6deg)}75%{transform:rotate(-.4deg)}100%{transform:rotate(0)}}
  @keyframes shake {0%,100%{transform:translateX(0)}20%{transform:translateX(-6px)}40%{transform:translateX(6px)}60%{transform:translateX(-4px)}80%{transform:translateX(4px)}}
  .anim-onay{ animation:pulseGlow 1.6s ease-in-out infinite; }
  .anim-gm{ animation:wobble .9s ease-in-out infinite; }
  .anim-ret{ animation:shake .55s ease-in-out 2; }

  body.tv .wrap{ max-width: 1600px; padding: 18px; }
  body.tv h1{ font-size:26px; }
  body.tv .sub{ font-size:16px; }
  body.tv label{ font-size:14px; }
  body.tv input, body.tv select{ padding:18px; font-size:18px; border-radius:18px; }
  body.tv .btn{ padding:14px 18px; font-size:16px; border-radius:16px; }
  body.tv .result-title{ font-size:22px; }
  body.tv .badge{ padding:14px 18px; font-size:16px; }
  body.tv .big{ font-size:56px; }
  body.tv .bar{ height:24px; }
  body.tv .best{ font-size:15px; padding:12px 16px; }
  body.tv .explain{ font-size:14px; }

  @media (max-width: 980px){
    .col-3{ grid-column:span 12; }
  }

/* iPad / Tablet Responsive */
@media (max-width: 1024px){

  .row{
    display: grid !important;
    grid-template-columns: 1fr 1fr !important;
    gap: 10px;
  }

  .col-3, .col-4, .col-6{
    width: 100% !important;
  }

  input, select{
    height: 48px !important;
    font-size: 16px !important;
  }

  .btn{
    padding: 12px 18px !important;
    font-size: 16px !important;
  }

  table{
    font-size: 13px !important;
  }

  h1, h2{
    font-size: 20px !important;
  }
}

/* Telefon i√ßin */
@media (max-width: 600px){
  .row{
    grid-template-columns: 1fr !important;
  }
}

</style>
</head>

<body>
<div id="loginScreen" style="
position:fixed;inset:0;background:#0b1020;
display:flex;align-items:center;justify-content:center;
z-index:9999;flex-direction:column;gap:10px">

  <h2 style="color:white">Kredi Panel Giri≈ü</h2>

  <input id="lUser" placeholder="Kullanƒ±cƒ± adƒ±">
  <input id="lPass" type="password" placeholder="≈ûifre">

  <button class="btn" onclick="login()">Giri≈ü Yap</button>
</div>

<div style="display:flex;gap:10px;margin-bottom:14px">
  <button class="btn" onclick="showTab('decisionTab')">Karar Ekranƒ±</button>
  <button class="btn" onclick="showTab('historyTab')">M√º≈üteri Ge√ßmi≈üi</button>
</div>
<div id="decisionTab">

<div class="wrap">
  <div class="card">
    <div class="topbar">
      <div>
        <h1>√áoklu Kredi Paneli</h1>
        <div class="sub">QNB / Yapƒ± Kredi / Garanti / Akbank / Halkbank / DenizBank arasƒ±nda ge√ßi≈ü yaparak karar, onay y√ºzdesi ve √∂nerilen limit g√∂r√ºrs√ºn. TV/B√ºy√ºk ekran modlarƒ± mevcut.</div>
      </div>
      <div class="actions">
        <button class="btn primary" id="btnCalc">Hesapla</button>
        <button class="btn" id="btnCopy">Sonucu Kopyala</button>
        <button class="btn" id="btnTV">TV Modu</button>
        <button class="btn" id="btnFS">Tam Ekran</button>
      </div>
    </div>

    <div class="grid">
      
<div class="col-3">
  <label>TC Kimlik</label>
  <input id="tc" type="text" placeholder="TC gir" onblur="loadCustomer(this.value)">
</div>

<div class="col-3">
        <label>G√∂sterilecek Banka</label>
        <select id="bank">
          <option value="QNB" selected>QNB</option>
          <option value="YK">Yapƒ± Kredi</option>
          <option value="GAR">Garanti BBVA</option>
          <option value="AKB">Akbank</option>
          <option value="HAL">Halkbank</option>
          <option value="DEN">DenizBank</option>
        </select>
      </div>
      <div class="col-3"><label>Findeks</label><input id="findeks" type="number" value="1650"></div>
      <div class="col-3"><label>Net Gelir (TL)</label><input id="income" type="number" value="60000"></div>
      <div class="col-3"><label>Aylƒ±k Taksit (TL)</label><input id="installment" type="number" value="12000"></div>

      <div class="col-3">
        <label>M√º≈üteri Tipi</label>
        <select id="customerType">
          <option value="standard" selected>Standart</option>
          <option value="salary">Maa≈ü M√º≈üterisi</option>
          <option value="new">Yeni M√º≈üteri</option>
        </select>
      </div>
      <div class="col-3">
        <label>Meslek</label>
        <select id="job">
          <option value="public">Kamu / Emekli</option>
          <option value="private" selected>√ñzel Sekt√∂r</option>
          <option value="self">Esnaf / Serbest</option>
        </select>
      </div>
      <div class="col-3">
        <label>Gecikme</label>
        <select id="delay">
          <option value="no" selected>Yok</option>
          <option value="yes">Var</option>
        </select>
      </div>
      <div class="col-3">
        <label>Son 45 g√ºn RED</label>
        <select id="reject45">
          <option value="no" selected>Hayƒ±r</option>
          <option value="yes">Evet</option>
        </select>
      </div>

      <div class="col-3">
        <label>ƒ∞stenen Tutar (TL)</label>
        <input id="requested" type="number" value="200000">
      </div>
<div class="col-3"><label>Toplam Kredi Bakiyesi</label><input id="loanBalance" type="number" value="0"></div>
      <div class="col-3"><label>Kart Limiti</label><input id="cardLimit" type="number" value="0"></div>
      <div class="col-3"><label>Kart Doluluk %</label><input id="cardUtil" type="number" value="0"></div>
      <div class="col-3"><label>Kredi Adedi</label><input id="loanCount" type="number" value="0"></div>
      <div class="col-3"><label>Kart Adedi</label><input id="cardCount" type="number" value="0"></div>
      <div class="col-3"><label>Son 30g Ba≈üvuru</label><input id="recentApps" type="number" value="0"></div>
      <div class="col-3"><label>Son Kredi Ayƒ±</label><input id="lastLoanMonth" type="number" value="12"></div>
      <div class="col-3">
        <label>Konut Durumu</label>
        <select id="housing">
          <option value="rent">Kiracƒ±</option>
          <option value="owner">Ev Sahibi</option>
          <option value="family">Aile Evi</option>
        </select>
      </div>

      </div>
    </div>

    <div class="result-wrap" id="result">
      <div class="result-head">
        <div class="result-title">Kredi Deƒüerlendirme Sonucu</div>
        <div class="best" id="bestBank">Bu m√º≈üteri i√ßin en uygun banka: ‚Äî</div>
      </div>

      <div class="badges">
        <div class="badge" id="bDecision"><span class="icon">‚Äî</span><span class="k">Karar</span><span class="v">‚Äî</span></div>
        <div class="badge" id="bCode"><span class="icon">üè∑Ô∏è</span><span class="k">Karar Kodu</span><span class="v">‚Äî</span></div>
        <div class="badge" id="bRating"><span class="icon">‚≠ê</span><span class="k">Rating</span><span class="v">‚Äî</span></div>
        <div class="badge" id="bScore"><span class="icon">üß†</span><span class="k">ƒ∞√ß Skor</span><span class="v">‚Äî</span></div>
        <div class="badge" id="bLimit"><span class="icon">üí≥</span><span class="k">Limit</span><span class="v">‚Äî</span></div>
      </div>

      <div class="bar"><span id="bar"></span></div>

      <div class="big" id="bigProb">
        <small>Onaylanma Olasƒ±lƒ±ƒüƒ±</small>
        %0
      </div>

      <div class="explain" id="explain">‚Äî</div>

      <div class="grid" style="margin-top:18px">
        <div class="col-12">
          <div style="padding:14px;border-radius:16px;border:1px solid rgba(255,255,255,.10);background:rgba(7,12,26,.55)">
            <div style="font-weight:900;margin-bottom:10px">M√º≈üteri Kaydƒ± (≈ûube Notu)</div>
            <div class="grid" style="gap:12px">
              <div class="col-3">
                <label>M√º≈üteri hangi bankadan aldƒ±?</label>
                <select id="approvedBank"></select>
              </div>
              <div class="col-3">
                <label>Alƒ±nan Tutar (TL)</label>
                <input id="approvedAmount" type="number" placeholder="√∂rn. 180000">
              </div>
              <div class="col-3">
                <label>&nbsp;</label>
                <button class="btn" id="btnSaveApproval">Kaydƒ± Kaydet</button>
              </div>
              <div class="col-12">
                <div class="sub" id="learnHint" style="margin:6px 0 0 0">‚Äî</div>
                <div class="sub" id="avgHint" style="margin-top:6px">‚Äî</div>
                <div class="sub" id="bankAvgHint" style="margin-top:6px">‚Äî</div>
              </div>

              <div class="col-12" style="margin-top:10px">
                <div class="sub" style="margin-bottom:8px">Son kayƒ±tlar (approvals) ‚Äî son 200</div>
                <div style="overflow:auto;border-radius:14px;border:1px solid rgba(255,255,255,.10)">
                  <table style="width:100%;border-collapse:collapse;font-size:12px">
                    <thead>
                      <tr style="background:rgba(7,12,26,.75)">
                        <th style="text-align:left;padding:10px;border-bottom:1px solid rgba(255,255,255,.08)">Tarih</th>
                        <th style="text-align:left;padding:10px;border-bottom:1px solid rgba(255,255,255,.08)">TC</th>
                        <th style="text-align:left;padding:10px;border-bottom:1px solid rgba(255,255,255,.08)">Profil</th>
                        <th style="text-align:left;padding:10px;border-bottom:1px solid rgba(255,255,255,.08)">Banka</th>
                        <th style="text-align:right;padding:10px;border-bottom:1px solid rgba(255,255,255,.08)">Tutar</th>
                        <th style="text-align:center;padding:10px;border-bottom:1px solid rgba(255,255,255,.08)">Sil</th>
                      </tr>
                    </thead>
                    <tbody id="approvalsTableBody">
                      <tr><td colspan="5" style="padding:10px;color:rgba(230,237,246,.72)">‚Äî</td></tr>
                    </tbody>
                  </table>
                </div>
              </div>

            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>

<script>
  const el = (id)=>document.getElementById(id);
  const clamp = (n,min,max)=>Math.max(min,Math.min(max,n));
  const fmt = (n)=> Number.isFinite(n) ? n.toLocaleString("tr-TR") : "‚Äî";

  function baseDTIPenalty(dti){
    if(dti>0.70) return 0.55;
    if(dti>0.60) return 0.45;
    if(dti>0.50) return 0.30;
    if(dti>0.40) return 0.15;
    return 0.0;
  }
  function jobAdj(job){ if(job==="public") return 10; if(job==="self") return -10; return 0; }
  function customerTypeAdj(ct){ if(ct==="salary") return 10; if(ct==="new") return -10; return 0; }

  
  // Halkbank karar kodlarƒ± (panel i√ßi): ONAY->HLK-OK, GM->HLK-GM, RET->HLK-RT (ve varyasyonlar)
  // Not: Bu kodlar panel mantƒ±ƒüƒ± i√ßin √ºretilmi≈ütir; ger√ßek ≈üube kodlarƒ±nƒ± payla≈üƒ±rsan birebir e≈üleriz.
  function halkCode(decision, prob, delay, reject45){
    if(reject45==="yes") return "HLK-RT45";
    if(decision==="RET"){
      if(delay==="yes") return "HLK-RTGEC";
      if(prob<=15) return "HLK-RTS1";
      return "HLK-RT";
    }
    if(decision==="GM"){
      if(prob>=55) return "HLK-GM2";
      return "HLK-GM1";
    }
    if(prob>=85) return "HLK-OK1";
    return "HLK-OK";
  }

function denizCode(decision, prob, delay, reject45){
    if(reject45==="yes") return "DNZ-RT45";
    if(decision==="RET"){
      if(delay==="yes") return "DNZ-RTGEC";
      if(prob<=15) return "DNZ-RTS1";
      return "DNZ-RT";
    }
    if(decision==="GM"){
      if(prob>=55) return "DNZ-GM2";
      return "DNZ-GM1";
    }
    if(prob>=85) return "DNZ-OK1";
    return "DNZ-OK";
  }

  
  function sCurve(findeks){
    const x=(findeks-1400)/120;
    return 100/(1+Math.exp(-x));
  }
  function extraRiskPenalty(p){
    let pen=0;

    // Kart limiti / gelir oranƒ± (ger√ßek banka mantƒ±ƒüƒ±)
    // Kart limiti sadece doluluk y√ºksekse risk sayƒ±lƒ±r
    const limitIncomeRatio = p.cardLimit / (p.income || 1);
    const util = p.cardUtil || 0;

    if(util > 70){
      if(limitIncomeRatio > 8) pen += 50;
      else if(limitIncomeRatio > 5) pen += 30;
      else if(limitIncomeRatio > 3) pen += 15;
    }
    else if(util > 40){
      if(limitIncomeRatio > 8) pen += 25;
      else if(limitIncomeRatio > 5) pen += 15;
    }
    if(p.cardUtil>80) pen+=25;
    else if(p.cardUtil>60) pen+=15;
    else if(p.cardUtil>40) pen+=5;

    const debtRatio=p.loanBalance/(p.income*12 || 1);
    if(debtRatio>1.5) pen+=25;
    else if(debtRatio>1.0) pen+=15;

    pen += p.loanCount*4;
    pen += p.cardCount*2;
    pen += p.recentApps*6;

    if(p.lastLoanMonth<3) pen+=20;
    else if(p.lastLoanMonth<6) pen+=10;

    if(p.housing==="rent") pen+=8;
    if(p.housing==="owner") pen-=6;

    return pen;
  }

function computeBank(bankKey, f, income, inst, req, customerType, job, delay, reject45){
    const dti = income>0 ? inst/income : 1;
    let internal=0, rating="", prob=0, mult=4, code="‚Äî";

    if(bankKey==="YK"){
      internal=(f/1900)*100;
      rating=f<1300?"D":f<1450?"C":f<1600?"B":"A";
      prob={A:85,B:65,C:40,D:15}[rating];
      mult=4.0;
    }
    if(bankKey==="QNB"){
      internal=1000+(f/1900)*2000;
      rating=internal>=2600?"R1":internal>=2350?"R2":internal>=2100?"R3":internal>=1800?"R4":"R5";
      prob={R1:90,R2:75,R3:55,R4:30,R5:12}[rating];
      mult=4.5;
    }
    if(bankKey==="GAR"){
      internal=(f/1900)*1000;
      rating=internal>=750?"A":internal>=650?"B":internal>=550?"C":"D";
      prob={A:82,B:62,C:42,D:18}[rating];
      mult=4.0;
    }
    if(bankKey==="AKB"){
      internal=(f/1900)*1000;
      rating=internal>=800?"1":internal>=700?"2":internal>=600?"3":internal>=500?"4":"5";
      prob={"1":85,"2":68,"3":48,"4":28,"5":12}[rating];
      mult=4.0;
    }
    
    if(bankKey==="HAL"){
      // Halkbank (tahmini √∂l√ßek): i√ß skor 300-950, rating H1..H5
      internal = 300 + (f/1900)*650; // 300..950
      rating = internal>=850 ? "H1"
             : internal>=760 ? "H2"
             : internal>=680 ? "H3"
             : internal>=600 ? "H4" : "H5";
      prob = {H1:84, H2:68, H3:48, H4:28, H5:12}[rating];
      mult = 3.9;
    }

if(bankKey==="DEN"){
      internal = 500 + (f/1900)*2500; // 500..3000
      rating = internal>=2700 ? "DB1"
             : internal>=2400 ? "DB2"
             : internal>=2100 ? "DB3"
             : internal>=1800 ? "DB4" : "DB5";
      prob = {DB1:88, DB2:72, DB3:52, DB4:30, DB5:12}[rating];
      mult = 4.2;
    }

    if(reject45==="yes") prob = 5;
    else{
      if(delay==="yes") prob -= 20;
      prob += jobAdj(job);
      prob += customerTypeAdj(customerType);
      if(dti>0.60) prob -= 25;
      else if(dti>0.50) prob -= 15;
      prob -= Math.round(baseDTIPenalty(dti)*100*0.15);
    }
    
    const pObj = {
      cardUtil:+el("cardUtil").value||0,
      cardLimit:+el("cardLimit").value||0,
      loanBalance:+el("loanBalance").value||0,
      loanCount:+el("loanCount").value||0,
      cardCount:+el("cardCount").value||0,
      recentApps:+el("recentApps").value||0,
      lastLoanMonth:+el("lastLoanMonth").value||12,
      housing:el("housing").value,
      income: income
    };
    const sc = sCurve(f);
    prob = clamp(Math.round(sc - extraRiskPenalty(pObj)), 5, 95);
    

    let decision="RET";
    if(reject45!=="yes"){
      if(prob>=70) decision="ONAY";
      else if(prob>=40) decision="GM";
    }

    let limit=0;
    if(decision!=="RET"){
      limit = income * mult * (1 - clamp(dti,0,0.85));
      if(customerType==="salary") limit *= 1.05;
      if(customerType==="new") limit *= 0.95;
      if(decision==="GM") limit *= 0.85;
      limit = Math.floor(limit);
    }

    let outcome = decision;
    if(decision!=="RET" && req>0){
      if(limit<=0) outcome="RET";
      else if(req<=limit) outcome = (decision==="GM") ? "GM (TUTAR UYGUN)" : "ONAY (TUTAR UYGUN)";
      else outcome = (decision==="GM") ? "GM / TUTAR D√ú≈û√úR" : "D√ú≈û√úK Lƒ∞Mƒ∞T";
    }

    if(bankKey==="DEN") code = denizCode(decision, prob, delay, reject45);

    if(bankKey==="HAL") code = halkCode(decision, prob, delay, reject45);

    return { bankKey, internal, rating, prob, decision, limit, dti, outcome, code };
  }

  function bankName(k){ return ({YK:"Yapƒ± Kredi", QNB:"QNB", GAR:"Garanti BBVA", AKB:"Akbank", HAL:"Halkbank", DEN:"DenizBank"}[k] || k); }
  function decisionIcon(dec){ return dec==="ONAY" ? "‚úîÔ∏è" : dec==="GM" ? "‚ùó" : "‚úñ"; }
  function decisionToneClass(dec){ return dec==="ONAY" ? "tone-green" : dec==="GM" ? "tone-yellow" : "tone-red"; }
  function decisionAnimClass(dec){ return dec==="ONAY" ? "anim-onay" : dec==="GM" ? "anim-gm" : "anim-ret"; }
  function barColorClass(prob){ return prob>=70 ? "green" : prob>=40 ? "yellow" : "red"; }

  function animateNumber(elNode, from, to, durMs){
    const start = performance.now();
    const ease = (t)=> 1 - Math.pow(1-t, 3);
    function step(now){
      const p = clamp((now-start)/durMs, 0, 1);
      const v = Math.round(from + (to-from)*ease(p));
      elNode.innerHTML = "<small>Onaylanma Olasƒ±lƒ±ƒüƒ±</small>%" + v;
      if(p<1) requestAnimationFrame(step);
    }
    requestAnimationFrame(step);
  }

  let lastProbShown=0;
  let lastText="";

  function setBadge(id, icon, key, val){
    const node = el(id);
    node.querySelector(".icon").textContent = icon;
    node.querySelector(".k").textContent = key;
    node.querySelector(".v").textContent = val;
  }

  function render(){
    const f = +el("findeks").value || 0;
    const income = +el("income").value || 0;
    const inst = +el("installment").value || 0;
    const req = +el("requested").value || 0;
    const customerType = el("customerType").value;
    const job = el("job").value;
    const delay = el("delay").value;
    const reject45 = el("reject45").value;

    const all = ["YK","QNB","GAR","AKB","HAL","DEN"].map(k=>computeBank(k,f,income,inst,req,customerType,job,delay,reject45));
    all.sort((a,b)=> b.prob - a.prob);

    const best = all[0];
    el("bestBank").textContent = `Bu m√º≈üteri i√ßin en uygun banka: ${bankName(best.bankKey)} (Onay %${best.prob})`;

    const selected = el("bank").value;
    const res = all.find(x=>x.bankKey===selected) || best;

    const decLabel = (res.decision==="ONAY") ? "ONAY" : (res.decision==="GM") ? "GM ONAYI" : "RET";

    setBadge("bDecision", decisionIcon(res.decision), "Karar", decLabel);
    setBadge("bCode", "üè∑Ô∏è", "Karar Kodu", ((res.bankKey==="DEN"||res.bankKey==="HAL") ? res.code : "‚Äî"));
    setBadge("bRating", "‚≠ê", "Rating", String(res.rating));
    setBadge("bScore", "üß†", "ƒ∞√ß Skor", fmt(Math.round(res.internal)));
    setBadge("bLimit", "üí≥", "Limit", fmt(Math.round(res.limit)) + " TL");

    const bar = el("bar");
    bar.className = "";
    bar.classList.add(barColorClass(res.prob));
    bar.style.width = res.prob + "%";

    const panel = el("result");
    panel.classList.remove("tone-green","tone-yellow","tone-red","anim-onay","anim-gm","anim-ret");
    panel.classList.add(decisionToneClass(res.decision));
    panel.classList.add(decisionAnimClass(res.decision));

    animateNumber(el("bigProb"), lastProbShown, res.prob, 520);
    lastProbShown = res.prob;

    const dtiPct = income>0 ? Math.round((inst/income)*100) : 100;
    const extra = [];
    if(reject45==="yes") extra.push("son 45 g√ºn RED");
    if(delay==="yes") extra.push("gecikme");
    if(customerType==="salary") extra.push("maa≈ü m√º≈üterisi");
    if(customerType==="new") extra.push("yeni m√º≈üteri");
    if(job==="public") extra.push("kamu/emekli");
    if(job==="self") extra.push("esnaf/serbest");

    el("explain").textContent =
      `DTI: %${dtiPct}. Se√ßili banka: ${bankName(res.bankKey)}. Sonu√ß: ${res.outcome}. ${res.bankKey==="DEN" ? ("DenizBank Kod: "+res.code+". ") : ""}${extra.length?("Etkiler: "+extra.join(" ‚Ä¢ ") + "."):""}`;

    
    saveLog({
      findeks:f,income,inst,req,
      prob:res.prob,limit:res.limit,bank:res.bankKey
    });
    lastText = [

      `Girdi: Findeks=${f}, Gelir=${fmt(income)} TL, Taksit=${fmt(inst)} TL, DTI=%${dtiPct}`,
      `M√º≈üteri Tipi=${customerType}, Meslek=${job}, Gecikme=${delay}, 45gRed=${reject45}`,
      `En iyi banka: ${bankName(best.bankKey)} (Onay %${best.prob})`,
      `Se√ßili banka: ${bankName(res.bankKey)}`,
      `Karar: ${decLabel}, Kod: ${((res.bankKey==="DEN"||res.bankKey==="HAL"))?res.code:"‚Äî"}, Rating: ${res.rating}, ƒ∞√ßSkor: ${Math.round(res.internal)}, Onay: %${res.prob}, Limit: ${fmt(Math.round(res.limit))} TL`
    ].join("\n");
    // ≈ûube yardƒ±mcƒ±larƒ±
    try{ populateApprovedBankOptions(); }catch(e){}
    saveCustomer().catch(()=>{});
    showLearning().catch(()=>{});
    showApprovalsList().catch(()=>{});
    showAverageForProfile().catch(()=>{});
    showBankAverages().catch(()=>{});

  }

  const TV_KEY="multi_bank_tv_mode_deniz";
  function setTV(on){
    document.body.classList.toggle("tv", on);
    localStorage.setItem(TV_KEY, on ? "1" : "0");
    el("btnTV").textContent = on ? "TV Modu: A√ßƒ±k" : "TV Modu";
  }
  function toggleTV(){ setTV(!document.body.classList.contains("tv")); }

  async function toggleFullscreen(){
    try{
      if(!document.fullscreenElement) await document.documentElement.requestFullscreen();
      else await document.exitFullscreen();
    }catch(e){ alert("Tarayƒ±cƒ± tam ekranƒ± engelliyor olabilir."); }
  }

  async function copyResult(){
    if(!lastText){ alert("√ñnce hesapla."); return; }
    try{
      await navigator.clipboard.writeText(lastText);
      alert("Sonu√ß panoya kopyalandƒ±.");
    }catch(e){
      const ta=document.createElement("textarea");
      ta.value=lastText; document.body.appendChild(ta);
      ta.select(); document.execCommand("copy");
      document.body.removeChild(ta);
      alert("Sonu√ß panoya kopyalandƒ±.");
    }
  }

  el("btnCalc").addEventListener("click", render);
  el("btnTV").addEventListener("click", toggleTV);
  el("btnFS").addEventListener("click", toggleFullscreen);
  el("btnCopy").addEventListener("click", copyResult);

  ["bank","findeks","income","installment","customerType","job","delay","reject45","requested","loanBalance","cardLimit","cardUtil","loanCount","cardCount","recentApps","lastLoanMonth","housing"].forEach(id=>{
    el(id).addEventListener("change", render);
    el(id).addEventListener("keyup", (e)=>{ if(e.key==="Enter") render(); });
  });

  
  // IndexedDB logging
  let db;
  const reqDB = indexedDB.open("creditLogs",1);
  reqDB.onupgradeneeded=e=>{
    db=e.target.result;
    db.createObjectStore("logs",{keyPath:"id",autoIncrement:true});
  };
  reqDB.onsuccess=e=>db=e.target.result;

  function saveLog(data){
    if(!db) return;
    const tx=db.transaction("logs","readwrite");
    tx.objectStore("logs").add({...data,ts:new Date().toISOString()});
  }

setTV(localStorage.getItem(TV_KEY)==="1");
  render();
  try{ showApprovalsList(); }catch(e){}
  try{ showAverageForProfile(); }catch(e){}
  try{ showBankAverages(); }catch(e){}

function showTab(id){
  document.getElementById("decisionTab").style.display = "none";
  document.getElementById("historyTab").style.display = "none";
  document.getElementById(id).style.display = "block";
}

async function searchHistory(){
  const tc = document.getElementById("historyTc").value;

  const { data } = await sb
    .from('approvals')
    .select('*')
    .eq('tc', tc)
    .order('created_at', { ascending:false });

  const body = document.getElementById("historyTableBody");

  if(!data || data.length===0){
    body.innerHTML = `<tr><td colspan="6">Kayƒ±t yok</td></tr>`;
    return;
  }

  
body.innerHTML = data.map(r=>`
  <tr>
    <td style="padding:8px">${(r.created_at||'').replace("T"," ").slice(0,16)}</td>
    <td style="padding:8px">${r.tc || '-'}</td>
    <td style="padding:8px">${r.banka || '-'}</td>
    <td style="padding:8px">${r.tutar ? r.tutar.toLocaleString("tr-TR") : '-'}</td>
    <td style="padding:8px">${r.findeks ?? '-'}</td>
    <td style="padding:8px">${r.gelir ?? '-'}</td>
    <td style="padding:8px">%${r.kart_doluluk ?? '-'}</td>
    <td style="padding:8px">${r.kredi_bakiye ?? '-'}</td>
    <td style="padding:8px">${r.istenen_tutar ?? '-'}</td>
  </tr>
`).join("");

}


async function login(){
  const u = document.getElementById("lUser").value;
  const p = document.getElementById("lPass").value;

  const { data } = await sb
    .from('users')
    .select('*')
    .eq('username', u)
    .eq('password', p)
    .single();

  if(!data){
    alert("Hatalƒ± giri≈ü");
    return;
  }

  document.getElementById("loginScreen").style.display = "none";
}

</script>


<!--
Supabase SQL (1 kez √ßalƒ±≈ütƒ±r):
create extension if not exists "uuid-ossp";
create table if not exists approvals (
  id uuid default uuid_generate_v4() primary key,
  tc text,
  banka text,
  tutar int,
  profile_key text,
  created_at timestamp default now()
);

Not: approvals tablosu i√ßin RLS kapalƒ± (UNRESTRICTED) olmalƒ± veya uygun policy yazƒ±lmalƒ±.
-->

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2">
function showTab(id){
  document.getElementById("decisionTab").style.display = "none";
  document.getElementById("historyTab").style.display = "none";
  document.getElementById(id).style.display = "block";
}

async function searchHistory(){
  const tc = document.getElementById("historyTc").value;

  const { data } = await sb
    .from('approvals')
    .select('*')
    .eq('tc', tc)
    .order('created_at', { ascending:false });

  const body = document.getElementById("historyTableBody");

  if(!data || data.length===0){
    body.innerHTML = `<tr><td colspan="6">Kayƒ±t yok</td></tr>`;
    return;
  }

  
body.innerHTML = data.map(r=>`
  <tr>
    <td style="padding:8px">${(r.created_at||'').replace("T"," ").slice(0,16)}</td>
    <td style="padding:8px">${r.tc || '-'}</td>
    <td style="padding:8px">${r.banka || '-'}</td>
    <td style="padding:8px">${r.tutar ? r.tutar.toLocaleString("tr-TR") : '-'}</td>
    <td style="padding:8px">${r.findeks ?? '-'}</td>
    <td style="padding:8px">${r.gelir ?? '-'}</td>
    <td style="padding:8px">%${r.kart_doluluk ?? '-'}</td>
    <td style="padding:8px">${r.kredi_bakiye ?? '-'}</td>
    <td style="padding:8px">${r.istenen_tutar ?? '-'}</td>
  </tr>
`).join("");

}


async function login(){
  const u = document.getElementById("lUser").value;
  const p = document.getElementById("lPass").value;

  const { data } = await sb
    .from('users')
    .select('*')
    .eq('username', u)
    .eq('password', p)
    .single();

  if(!data){
    alert("Hatalƒ± giri≈ü");
    return;
  }

  document.getElementById("loginScreen").style.display = "none";
}

</script>
<script>
const { createClient } = supabase;
const sb = createClient(
  "https://qgpzwognwltydchqtxuh.supabase.co",
  "sb_publishable_4BujNr0cadf4Tbty4rzL3w_wLVi0nhc"
);

async function loadCustomer(tc){
  const { data, error } = await sb
    .from('customers')
    .select('*')
    .eq('tc', tc)
    .single();

  if(error || !data){
    console.log("M√º≈üteri bulunamadƒ±");
    return;
  }

  el("findeks").value = data.findeks;
  el("income").value = data.gelir;
  el("cardLimit").value = data.kart_limit;
  el("cardUtil").value = data.kart_doluluk;
  el("loanBalance").value = data.kredi_bakiye;
  el("loanCount").value = data.kredi_adet;
  el("lastLoanMonth").value = data.son_kredi_ayi;
  el("recentApps").value = data.son_basvuru;

  render();
  try{ showApprovalsList(); }catch(e){}
  try{ showAverageForProfile(); }catch(e){}
  try{ showBankAverages(); }catch(e){}
}


function profileKey(){
  // Basit segmentleme (daha sonra geni≈ületebiliriz)
  const f = +el("findeks").value || 0;
  const income = +el("income").value || 0;
  const inst = +el("installment").value || 0;
  const dti = income>0 ? inst/income : 1;
  const util = +el("cardUtil").value || 0;

  const fBand = f>=1700 ? "F4" : f>=1550 ? "F3" : f>=1400 ? "F2" : "F1";
  const iBand = income>=90000 ? "I4" : income>=60000 ? "I3" : income>=35000 ? "I2" : "I1";
  const dBand = dti<=0.30 ? "D1" : dti<=0.45 ? "D2" : dti<=0.60 ? "D3" : "D4";
  const uBand = util<=15 ? "U1" : util<=40 ? "U2" : util<=70 ? "U3" : "U4";

  // ƒ∞stersen meslek/m√º≈üteri tipi de eklenebilir
  return `${fBand}-${iBand}-${dBand}-${uBand}`;
}

function getTop3BanksFromText(){
  // bestBank alanƒ±nda "Kredi verebilecek bankalar:" formatƒ± varsa onu parse etmeye √ßalƒ±≈üƒ±r
  // yoksa selected bankayƒ± d√∂nd√ºr√ºr.
  const t = (el("bestBank")?.textContent || "").toUpperCase();
  const names = ["QNB","YAPI KREDI","GARANTI","AKBANK","HALKBANK","DENIZBANK"];
  const found = names.filter(n => t.includes(n));
  // Map display names to keys
  const mapToKey = (n)=>{
    if(n==="YAPI KREDI") return "Yapƒ± Kredi";
    if(n==="GARANTI") return "Garanti BBVA";
    if(n==="DENIZBANK") return "DenizBank";
    if(n==="HALKBANK") return "Halkbank";
    if(n==="AKBANK") return "Akbank";
    if(n==="QNB") return "QNB";
    return n;
  };
  const list = found.map(mapToKey);
  if(list.length) return list.slice(0,3);
  // fallback: selected bank
  const k = el("bank")?.value;
  return [({YK:"Yapƒ± Kredi", QNB:"QNB", GAR:"Garanti BBVA", AKB:"Akbank", HAL:"Halkbank", DEN:"DenizBank"}[k] || "QNB")];
}




function populateApprovedBankOptions(){
  const sel = el("approvedBank");
  if(!sel) return;

  const keys = ["QNB","YK","GAR","AKB","HAL","DEN"];
  sel.innerHTML = "";
  keys.forEach(k=>{
    const o = document.createElement("option");
    o.value = bankName(k);
    o.textContent = bankName(k);
    sel.appendChild(o);
  });
}




async function saveCustomer(){
  const tc = (el("tc")?.value || "").trim();
  if(tc.length < 5) return;

  await sb.from('customers').upsert({
    tc,
    findeks: +el("findeks").value || 0,
    gelir: +el("income").value || 0,
    kart_limit: +el("cardLimit").value || 0,
    kart_doluluk: +el("cardUtil").value || 0,
    kredi_bakiye: +el("loanBalance").value || 0,
    kredi_adet: +el("loanCount").value || 0,
    son_kredi_ayi: +el("lastLoanMonth").value || 0,
    son_basvuru: +el("recentApps").value || 0
  });
}

async function saveApproval(){
  const tc = (el("tc")?.value || "").trim();
  const banka = el("approvedBank")?.value;
  const tutar = +el("approvedAmount")?.value || 0;
  if(tc.length < 5){ alert("TC gir."); return; }
  if(!banka){ alert("Banka se√ß."); return; }
  if(tutar <= 0){ alert("Tutar gir."); return; }

  const pk = profileKey();

  const { error } = await sb.from('approvals').insert({
    tc,
    banka,
    tutar,
    profile_key: pk
  });

  if(error){
    console.error(error);
    alert("Kaydedilemedi. approvals tablosu + RLS kontrol et.");
    return;
  }
  el("approvedAmount").value = "";
  alert("Kayƒ±t eklendi.");
  await showLearning(); // g√ºncelle
  await showApprovalsList();
  await showAverageForProfile();
  await showBankAverages();
}


async function showAverageForProfile(){
  const hint = document.getElementById("avgHint");
  if(!hint) return;

  const pk = profileKey();

  const { data, error } = await sb
    .from('approvals')
    .select('tutar')
    .eq('profile_key', pk)
    .order('created_at', { ascending: false })
    .limit(500);

  if(error){
    console.error(error);
    hint.textContent = "Ortalama hesaplanamadƒ± (approvals/izin).";
    return;
  }
  if(!data || data.length === 0){
    hint.textContent = "Bu profile ait ortalama veri yok.";
    return;
  }

  const total = data.reduce((s,r)=> s + (r.tutar || 0), 0);
  const avg = Math.round(total / data.length);

  hint.textContent =
    `Bu profile sahip m√º≈üterilerin ortalama aldƒ±ƒüƒ± tutar: ${avg.toLocaleString("tr-TR")} TL  (n=${data.length})`;
}

async function showBankAverages(){
  const elHint = document.getElementById("bankAvgHint");
  if(!elHint) return;

  const pk = profileKey();

  const { data, error } = await sb
    .from('approvals')
    .select('banka,tutar')
    .eq('profile_key', pk)
    .order('created_at', { ascending: false })
    .limit(500);

  if(error){
    console.error(error);
    elHint.textContent = "";
    return;
  }
  if(!data || data.length === 0){
    elHint.textContent = "";
    return;
  }

  const map = {};
  data.forEach(r=>{
    const b = r.banka || "-";
    if(!map[b]) map[b] = [];
    map[b].push(r.tutar || 0);
  });

  const lines = Object.keys(map).map(b=>{
    const arr = map[b];
    const avg = Math.round(arr.reduce((a,v)=>a+v,0)/arr.length);
    return `${b}: ${avg.toLocaleString("tr-TR")} TL (n=${arr.length})`;
  }).sort((a,b)=>{
    // sort by avg desc using number extract
    const na = parseInt(a.replace(/[^\d]/g,''))||0
    const nb = parseInt(b.replace(/[^\d]/g,''))||0
    return nb-na
  });

  elHint.textContent = "Bankalara g√∂re ortalama verilen tutar ‚Üí  " + lines.join("  |  ");
}

async function showLearning(){
  const hint = el("learnHint");
  if(!hint) return;

  // Bu profile ait son 200 kaydƒ± √ßek (performans i√ßin limit)
  const pk = profileKey();
  const { data, error } = await sb
    .from('approvals')
    .select('banka')
    .eq('profile_key', pk)
    .order('created_at', { ascending: false })
    .limit(200);

  if(error){
    console.error(error);
    hint.textContent = "√ñƒürenen √∂neri i√ßin approvals tablosu / izinler kontrol edilmeli.";
    return;
  }
  if(!data || data.length === 0){
    hint.textContent = "Bu profile ait ge√ßmi≈ü kayƒ±t yok. (Kaydƒ± Kaydet ile √∂ƒürenmeye ba≈ülar)";
    return;
  }

  const counts = {};
  data.forEach(r => counts[r.banka] = (counts[r.banka]||0) + 1);
  const entries = Object.entries(counts).sort((a,b)=>b[1]-a[1]);
  const [bestBank, bestCount] = entries[0];
  const pct = Math.round((bestCount / data.length) * 100);

  hint.textContent = `Bu profile en √ßok kredi veren: ${bestBank} (%${pct} ba≈üarƒ±, n=${data.length})`;
}



async function deleteApproval(id){
  if(!confirm("Bu kaydƒ± silmek istiyor musun?")) return;
  await sb.from('approvals').delete().eq('id', id);
  await showApprovalsList();
  await showAverageForProfile();
  await showBankAverages();
}

async function showApprovalsList(){
  const body = document.getElementById("approvalsTableBody");
  if(!body) return;

  const { data, error } = await sb
    .from('approvals')
    .select('id,tc,banka,tutar,profile_key,created_at')
    .order('created_at', { ascending: false })
    .limit(200);

  if(error){
    console.error(error);
    body.innerHTML = `<tr><td colspan="5" style="padding:10px;color:rgba(230,237,246,.72)">Liste alƒ±namadƒ± (approvals tablo/izin).</td></tr>`;
    return;
  }
  if(!data || data.length===0){
    body.innerHTML = `<tr><td colspan="5" style="padding:10px;color:rgba(230,237,246,.72)">Hen√ºz kayƒ±t yok.</td></tr>`;
    return;
  }

  body.innerHTML = data.map(r=>{
    const dt = (r.created_at || "").replace("T"," ").replace("Z","");
    const tc = (r.tc || "").toString();
    const tcMask = tc.length>=4 ? ("***" + tc.slice(-4)) : tc;
    const tut = (r.tutar ?? 0).toLocaleString("tr-TR");
    const pk = r.profile_key || "";
    const bk = r.banka || "";
    return `<tr>
      <td style="padding:10px;border-bottom:1px solid rgba(255,255,255,.06);white-space:nowrap">${dt}</td>
      <td style="padding:10px;border-bottom:1px solid rgba(255,255,255,.06)">${tcMask}</td>
      <td style="padding:10px;border-bottom:1px solid rgba(255,255,255,.06)">${pk}</td>
      <td style="padding:10px;border-bottom:1px solid rgba(255,255,255,.06)">${bk}</td>
      <td style="padding:10px;border-bottom:1px solid rgba(255,255,255,.06);text-align:right">${tut}</td>
    <td style="padding:10px;text-align:center;border-bottom:1px solid rgba(255,255,255,.06)">
      <button onclick="deleteApproval('${r.id}')" style="background:#b91c1c;border:none;color:white;padding:6px 10px;border-radius:6px;cursor:pointer">üóë</button>
    </td></tr>`;
  }).join("");
}

// UI events
document.addEventListener("click", (e)=>{
  if(e.target && e.target.id==="btnSaveApproval") saveApproval();
});


function showTab(id){
  document.getElementById("decisionTab").style.display = "none";
  document.getElementById("historyTab").style.display = "none";
  document.getElementById(id).style.display = "block";
}

async function searchHistory(){
  const tc = document.getElementById("historyTc").value;

  const { data } = await sb
    .from('approvals')
    .select('*')
    .eq('tc', tc)
    .order('created_at', { ascending:false });

  const body = document.getElementById("historyTableBody");

  if(!data || data.length===0){
    body.innerHTML = `<tr><td colspan="6">Kayƒ±t yok</td></tr>`;
    return;
  }

  
body.innerHTML = data.map(r=>`
  <tr>
    <td style="padding:8px">${(r.created_at||'').replace("T"," ").slice(0,16)}</td>
    <td style="padding:8px">${r.tc || '-'}</td>
    <td style="padding:8px">${r.banka || '-'}</td>
    <td style="padding:8px">${r.tutar ? r.tutar.toLocaleString("tr-TR") : '-'}</td>
    <td style="padding:8px">${r.findeks ?? '-'}</td>
    <td style="padding:8px">${r.gelir ?? '-'}</td>
    <td style="padding:8px">%${r.kart_doluluk ?? '-'}</td>
    <td style="padding:8px">${r.kredi_bakiye ?? '-'}</td>
    <td style="padding:8px">${r.istenen_tutar ?? '-'}</td>
  </tr>
`).join("");

}


async function login(){
  const u = document.getElementById("lUser").value;
  const p = document.getElementById("lPass").value;

  const { data } = await sb
    .from('users')
    .select('*')
    .eq('username', u)
    .eq('password', p)
    .single();

  if(!data){
    alert("Hatalƒ± giri≈ü");
    return;
  }

  document.getElementById("loginScreen").style.display = "none";
}

</script>


</div>

<div id="historyTab" style="display:none">
  <h2>M√º≈üteri Ge√ßmi≈üi</h2>

  <div style="display:flex;gap:6px;margin-bottom:10px">
    <input id="historyTc" placeholder="TC gir">
    <button class="btn" onclick="searchHistory()">Ara</button>
  </div>

  <div style="overflow:auto;border-radius:14px;border:1px solid rgba(255,255,255,.10)">
    <table style="width:100%;border-collapse:collapse;font-size:12px">
      <thead>
        <tr>
          <th style="padding:8px">Tarih</th>
          <th style="padding:8px">Banka</th>
          <th style="padding:8px">Tutar</th>
          <th style="padding:8px">Findeks</th>
          <th style="padding:8px">Gelir</th>
          <th style="padding:8px">TC</th>
          <th style="padding:8px">Banka</th>
          <th style="padding:8px">Tutar</th>
          <th style="padding:8px">Findeks</th>
          <th style="padding:8px">Gelir</th>
          <th style="padding:8px">Kart %</th>
          <th style="padding:8px">Kredi Bakiye</th>
          <th style="padding:8px">ƒ∞stenen Tutar</th>
        </tr>
      </thead>
      <tbody id="historyTableBody">
        <tr><td colspan="6" style="padding:8px">‚Äî</td></tr>
      </tbody>
    </table>
  </div>
</div>

</body>
</html>
